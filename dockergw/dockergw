#!/usr/bin/env python
import sys
import os
from os import symlink
from os.path import exists
from docker import Client
c = Client(base_url='unix://var/run/docker.sock')

linkbase="/tmp/"
dbase="/var/lib/docker/graph/"


def lookup(name):
  lst = c.images()
  image=0
  for i in lst:
    for tag in i['RepoTags']:
     if tag==name:
       image=i
  return image


name=sys.stdin.readline().rstrip()

image=lookup(name)

if image==0:
  c.pull(name)
  image=lookup(name)

imagePath = os.path.join(dbase, image['Id'])
linkPath = os.path.join(linkbase, name)
print imagePath
if image != 0:
  if exists(linkPath)==False:
    symlink(imagePath, linkPath)
  print 1
else:
  print 0
